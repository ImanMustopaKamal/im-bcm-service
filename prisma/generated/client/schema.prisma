generator client {
  provider        = "prisma-client-js"
  output          = "generated/client"
  previewFeatures = ["views"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model threat_type {
  id         String    @id @db.Char(40)
  tenant_id  String    @db.Char(8)
  name       String    @db.VarChar(250)
  is_active  Boolean   @default(true)
  created_at DateTime  @default(now())
  updated_at DateTime? @updatedAt
  threats    threat[]

  @@unique([tenant_id, name], map: "u_threat_type_name_tenant")
}

model threat {
  id           String      @id @db.Char(40)
  tenant_id    String      @db.Char(8)
  type_id      String      @db.Char(40)
  name         String      @db.VarChar(250)
  is_active    Boolean     @default(true)
  created_at   DateTime    @default(now())
  updated_at   DateTime?   @updatedAt
  threat_types threat_type @relation(fields: [type_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_threat_types")

  @@unique([type_id, name, tenant_id], map: "u_threat_type_name_tenant")
  @@index([type_id], map: "fk_threat_type")
}

model Applications {
  id         String    @id @db.VarChar(22)
  tenant_id  String    @db.Char(8)
  code       String    @db.VarChar(120)
  name       String    @db.VarChar(250)
  severity   Int
  is_active  Boolean   @default(true)
  created_at DateTime  @default(now())
  updated_at DateTime? @updatedAt

  @@unique([tenant_id, code], map: "u_app_tenant_code")
  @@map("reff_applications")
}

model Staff_Condition {
  id         String    @id @db.VarChar(22)
  tenant_id  String    @db.Char(8)
  name       String    @db.VarChar(250)
  sort_order Int
  is_active  Boolean   @default(true)
  created_at DateTime  @default(now())
  updated_at DateTime? @updatedAt

  @@unique([name, tenant_id], map: "status_staff_condition_name_key")
  @@map("status_staff_condition")
}

model Indirect_Unit {
  id         String    @id @db.VarChar(22)
  tenant_id  String    @db.Char(8)
  name       String    @db.VarChar(250)
  sort_order Int
  is_active  Boolean   @default(true)
  created_at DateTime  @default(now())
  updated_at DateTime? @updatedAt

  @@unique([tenant_id, name], map: "u_i_unit_tenant")
  @@map("status_indirect_unit")
}

model App_Testing_Period {
  code       String    @id @db.VarChar(22)
  tenant_id  String    @db.Char(8)
  name       String    @db.VarChar(250)
  sort_order Int
  is_active  Boolean   @default(true)
  created_at DateTime  @default(now())
  updated_at DateTime? @updatedAt

  @@unique([tenant_id, name], map: "u_app_testing_name_tenant")
  @@map("status_app_testing_period")
}

model Currency {
  code        String    @id @db.Char(50)
  tenant_id   String    @db.Char(8)
  name        String    @db.Char(100)
  description String    @db.VarChar(2500)
  sort_order  Int       @default(2)
  is_active   Boolean   @default(true)
  created_at  DateTime  @default(now())
  updated_at  DateTime? @updatedAt

  @@unique([tenant_id, name], map: "u_curr_name_tenant")
  @@map("reff_currency")
}

view vw_threat_types {
  id            String   @id @db.Char(40)
  tenant_id     String?   @db.Char(8)
  name          String?   @db.VarChar(250)
  is_active     Boolean?  @default(true)
  created_at    DateTime? @default(now())
  updated_at    DateTime?
  delete_enable Int       @default(0)
}
